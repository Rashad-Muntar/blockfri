import type { NextPage } from "next";
import Head from "next/head";
import Nav from "../src/components/layout/nav";
import MainSection from "../src/components/mainSection";
import { useDispatch } from "react-redux";
import { SetCryptoList } from "../src/State/cryptoSlice";
import useDataFetch from "../src/components/shared/useFetch";
import { useEffect } from "react";

type Props = {
  icon: string;
  name: string;
};

const Home: NextPage = () => {
  const { data } = useDataFetch<{ coins: [Props] }>(
    "https://api.coinstats.app/public/v1/coins?skip=0&limit=40"
  );

  const dispatch = useDispatch();

  dispatch(SetCryptoList(data?.coins));
  useEffect(() => {
    dispatch(SetCryptoList(data));
  }, []);
  return (
    <div>
      <Head>
        <title>Blockfri, know what the crypto market is offering</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Nav />
      <MainSection />
    </div>
  );
};

export default Home;
